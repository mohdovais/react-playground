import{R as e,r as t}from"./vendor-e19347da.js";const n=t.memo,a=t.useCallback,r=t.useState,l=t.useRef,o=t.useReducer,c=t.useEffect,i=t.useMemo,s=t.useContext,u=t.Children,d=t.isValidElement,p=t.createContext,m=window,f=m.addEventListener,v=m.removeEventListener,x={display:"none"};function b(e,t=x){if(null==e)return t;const n=m.innerHeight,a=m.innerWidth,{top:r,left:l,bottom:o,height:c}=e.getBoundingClientRect();if(r<0||r>n||l<0||l>a)return t;const i=a-l;let s={position:"absolute",width:"max-content"};return r<n-o?(s.top=c,s.maxHeight=Math.floor(n-o-5)):(s.bottom=c,s.maxHeight=r-5),l<i?(s.left=0,s.maxWidth=Math.floor(a-l-5)):(s.right=0,s.maxWidth=l-5),s}const{round:y,random:h}=Math;function E(e){return r((()=>function(e=""){return e+y(h()+1e17*h()).toString(32)}(e)))[0]}var w=p({keyDown:null,setValue:e=>{}});const g=Object.assign;function k(e,t){return g({},e,t)}const D=["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"," ","Enter","Escape"];function N(e,t){switch(t.type){case 0:return k(e,{value:t.value,expanded:!t.collapse&&e.expanded});case 1:return k(e,{expanded:t.expand});case 2:return k(e,{keyDown:t.key,expanded:t.expand||e.expanded})}return e}const O=n((function(){return e.createElement("svg",{viewBox:"0 0 16 16"},e.createElement("path",{fill:"none",stroke:"#343a40",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2 5l6 6 6-6"}))}));var A=n((function(t){const{autocomplete:n="both",autofocus:s,children:u,className:d="",disabled:p,id:y,multiple:h,name:g,onInput:k,placeholder:A,readOnly:C,required:K,role:j="combobox",style:I,triggerIcon:L=e.createElement(O,null)}=t,M=l(null),R=l(null),{expanded:P,value:S,activeDescendant:W,context:q,handleKeyDown:H}=function({multiple:e}){const[t,n]=o(N,{expanded:!1,keyDown:null,value:"",activeDescendant:""}),{expanded:r,value:l,keyDown:c,activeDescendant:s}=t,u=a((t=>{n({type:0,value:t,collapse:!e})}),[n]);return{expanded:r,value:l,activeDescendant:s,context:i((()=>({setValue:u,keyDown:c})),[c]),handleKeyDown:a((function(e){const{key:t,ctrlKey:a,metaKey:r,shiftKey:l}=e;return"Escape"===t?n({type:1,expand:!1}):D.indexOf(t)>-1?n({type:2,key:{key:t,shiftKey:l,ctrlKey:a||r},expand:"ArrowDown"===t||"ArrowUp"===t}):void 0}),[])}}({multiple:h}),V=E("picker-"),z=void 0===y?V:y,B=z+"-picker",U=function(e,t=!0){const n=e.current,[a,l]=r((()=>b(n)));return c((()=>{let e=!1;function a(){t&&!e&&(e=!0,m.requestAnimationFrame((()=>{l(b(n)),e=!1})))}return f("resize",a),f("scroll",a),t?a():l(x),()=>{v("resize",a),v("scroll",a)}}),[t,n]),a}(M,P);return c((()=>{var e;s&&(null==(e=null==R?void 0:R.current)||e.focus())}),[]),e.createElement("div",{id:z,className:"x-bb-ee "+d,style:I,role:j,"aria-expanded":P?"true":"false","aria-owns":B,"aria-haspopup":"listbox",ref:M},e.createElement("div",{className:"x-bb-gg"},e.createElement("div",null,e.createElement("input",{type:"text",name:g,"aria-autocomplete":n,"aria-controls":B,"aria-activedescendant":W,onKeyDown:H,onInput:k,ref:R,disabled:p,readOnly:C,placeholder:A,className:"x-bb-ff",required:K,value:S}),e.createElement("div",{tabIndex:-1,role:"button","aria-label":"Show picker",className:"x-bb-ii",onClick:p?void 0:()=>{var e;setExpanded(!P),null==(e=null==R?void 0:R.current)||e.focus()}},L)),e.createElement("div",{id:B,className:"x-bb-hh",style:U},P?e.createElement(w.Provider,{value:q},u):null)))}));const C=w,K=e.createContext({disabled:!1});var j=n((function(t){const n=l(null),{disabled:a}=s(K),{value:r,children:o,disabled:c=!1,selected:i=!1}=t,u=a||c;return e.createElement("li",{className:"x-a-dd",ref:n,onClick:u?void 0:()=>{const e=n.current,t=void 0===r?e&&e.innerText:r;console.log(t)}},o)}));var I=n((function(t){const{label:n,disabled:a=!1}=t,r=u.toArray(t.children).filter((e=>d(e)&&e.type===j));return e.createElement("li",{className:"x-a-bb"},e.createElement("label",{className:"x-a-cc"},n),r.length>0?e.createElement("ul",null,e.createElement(K.Provider,{value:{disabled:a}},r)):null)})),L=Object.prototype.hasOwnProperty,M=Object.getOwnPropertySymbols,R=Object.prototype.propertyIsEnumerable,P=Object.assign;const S=n((function(t){const{key:n}=s(C);console.log(n);const a=u.toArray(t.children).filter((e=>d(e)&&(e.type===j||e.type===I)));return e.createElement("ul",{className:"x-a-a"},a)}));var W=n((function(t){const{className:n="",children:a}=t,r=((e,t)=>{var n={};for(var a in e)L.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&M)for(var a of M(e))t.indexOf(a)<0&&R.call(e,a)&&(n[a]=e[a]);return n})(t,["className","children"]);return e.createElement(A,P(P({},r),{className:"combobox "+n}),e.createElement(S,null,a))}));const q=I,H=j;export{W as C,q as O,c as a,a as b,H as c,r as u};
//# sourceMappingURL=framework-3f514d1c.js.map
