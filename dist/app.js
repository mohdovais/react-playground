!function(t,e){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e;const n=Math;function a(t,e){var a=n.pow(10,e||0);return n.round(t*a)/a}function r(t){return t*n.PI/180||0}function i(t,e,i,l){var o=r(l);return{x:a(t+i*n.cos(o),2),y:a(e+i*n.sin(o),2)}}function l(t,e,r,l,o,c){const s=a(r*(void 0===c?.5:c),2),d=i(t,e,s,l),u=i(t,e,s,o),m=i(t,e,r,l),g=i(t,e,r,o),h=n.abs(o-l)>180?1:0;return`M${d.x} ${d.y}`+`A${s} ${s} 0 ${h} 1 ${u.x} ${u.y}`+`L${g.x} ${g.y}`+`A${r} ${r} 0 ${h} 0 ${m.x} ${m.y}`+`L${d.x} ${d.y}`+"Z"}function o(t,e){const a=r(e+t)/2;return`translate(${25*n.cos(a)},${25*n.sin(a)})`}var c=e.memo(function(t){return e.createElement("g",{onClick:t.onSelect,transform:t.highlight?o(t.startAngle,t.endAngle):null},e.createElement("path",{d:l(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.donut),"data-id":t.id,fill:t.fill,stroke:"rgba(0,0,0,0.2)"}))});var s=e.memo(function(t){return e.createElement("g",null,e.createElement("circle",{cx:t.cx,cy:t.cy,r:t.radius,fill:t.fill}),e.createElement("text",{x:t.cx,y:t.cy,textAnchor:"middle"},t.text))});var d=e.memo(function(t){const a=r((t.endAngle+t.startAngle)/2),i=(1+t.donut)*t.radius/2;return e.createElement("text",{x:t.cx+i*n.cos(a),y:t.cy+i*n.sin(a),textAnchor:"middle"},t.text)});function u(){return(100+Math.round(155*Math.random())).toString(16)}function m(){return"#"+u()+u()+u()}function g(t){const e=function(){return Array.prototype.reduce.call(arguments,(t,e)=>t+e,0)}.apply(null,t);let n=0;return t.map((t,a)=>{return{id:a,value:t,startAngle:n,endAngle:n+=360*t/e,animStartAngle:0,animEndAngle:0,color:m()}})}function h(t){const e=1.2*t.animAngle;let a=0;return Object.assign({},t,{animAngle:e,data:t.data.map(t=>{const r=a,i=r+n.min(e,t.endAngle-t.startAngle);return a=i,Object.assign({},t,{animStartAngle:r,animEndAngle:i})})})}function A(t,e){return n.round(t+n.random()*(e-t))}t.render(e.createElement(class extends e.PureComponent{constructor(t){super(t);const e=this;var a;e.state={data:a=g(t.data),discColor:m(),animAngle:1,maxAngle:n.max.apply(n,a.map(t=>t.endAngle-t.startAngle))},e.onSelect=e.onSelect.bind(e),e.animate=e.animate.bind(e)}componentDidMount(){this.animate(0)}render(){const{dimension:t,donut:n}=this.props,{data:a,discColor:r}=this.state,i=t/2;return e.createElement("svg",{width:t,height:t,viewBox:`-${i} -${i} ${t} ${t}`},a.map(t=>e.createElement(c,{label:"value is "+t.value,key:"pie"+t.id,id:t.id,cx:0,cy:0,radius:.8*i,fill:t.color,startAngle:t.animStartAngle,endAngle:t.animEndAngle,donut:n,highlight:!0===t.highlight,onSelect:this.onSelect})),e.createElement(s,{cx:"0",cy:"0",radius:n*i*.8,fill:r,text:"Hello World"}),a.map(t=>e.createElement(d,{text:"value is "+t.value,key:"label"+t.id,cx:0,cy:0,radius:.8*i,startAngle:t.animStartAngle,endAngle:t.animEndAngle,donut:n})))}animate(){const t=this,e=t.state;e.animAngle<e.maxAngle&&requestAnimationFrame(t.animate),t.setState(h)}onSelect(t){const e=0|t.target.getAttribute("data-id"),n=this.state.data[e];!0!==n.highlight&&this.setState(t=>Object.assign({},t,{data:t.data.map(t=>t===n?Object.assign({},t,{highlight:!0}):t.highlight?Object.assign({},t,{highlight:!1}):t)}))}},{data:new Array(A(1,15)).join(",").split(",").map(()=>A(0,100)),dimension:1024,donut:.33}),document.getElementById("root"))}(ReactDom,React);
//# sourceMappingURL=app.js.map
