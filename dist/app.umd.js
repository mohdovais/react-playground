!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react-dom"),require("react")):"function"==typeof define&&define.amd?define(["react-dom","react"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).app=t(e.ReactDOM,e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var a=o(t),i=n(t);const r=t.memo,s=t.useCallback,l=t.useState,u=t.useRef,c=t.useReducer,d=t.useEffect;var m=r(a.forwardRef((function(e,t){const{id:n,className:o="",data:i,displayField:r,selected:s,focusIndex:l,expanded:u,onSelect:c,optionRenderer:d}=e;return a.createElement("ul",{id:n,role:"listbox",className:"listbox-module_listbox__16qJO "+o,ref:t},u?(m=i,null==m?[]:Array.isArray(m)?m:[m]).map(((e,t)=>{return a.createElement("li",{key:n+"-option-"+t,role:"option",id:n+"-option-"+t,className:"listbox-module_option__3a9MH"+(l===t?" listbox-module_focus__m8cIN":"")+(s===e?" listbox-module_selected__2AANR":""),onClick:()=>c(e)},"function"==typeof d?d(e):(o=e,i=r,Object.prototype.hasOwnProperty.call(o,i)?String(e[r]):null));var o,i})):null);var m})));const p=Object.assign,f={displayField:"",expanded:!1,focusIndex:-1,selection:void 0,data:[],range:[]};function b(e,t){switch(t.type){case 0:return p({},e,{expanded:!1,focusIndex:-1});case 1:return p({},e,{expanded:!0});case 2:return p({},e,{expanded:!e.expanded});case 3:{let t=e.range.length;return p({},e,{expanded:!0,focusIndex:0===t?-1:(e.focusIndex+1)%t})}case 4:{let t=e.range.length,n=-1===e.focusIndex?t:e.focusIndex;return p({},e,{expanded:!0,focusIndex:0===t?-1:(t+n-1)%t})}case 5:if(-1!==e.focusIndex)return p({},e,{expanded:!1,focusIndex:-1,selection:e.range[e.focusIndex]});break;case 6:return p({},e,{expanded:!1,focusIndex:-1,selection:t.selection});case 7:{let n=t.data;return p({},e,{data:n,range:n})}case 8:{const n=new RegExp(t.query,"i");return p({},e,{expanded:!0,range:e.data.filter((t=>n.test(t[e.displayField].toString())))})}}return e}function x(e){const t=e.current;if(t){const e=t.getBoundingClientRect();t.style.maxHeight=window.innerHeight-e.y-10+"px"}}function g(e){const{data:t,displayField:n="text",onChange:o,optionRenderer:i,displayRenderer:r}=e,p=u(null),g=u(null),y=function(e=""){return l((()=>e+Math.round(Math.random()+1e17*Math.random()).toString(32)))[0]}("combobox-")+"-listbox",[h,v]=c(b,f,(e=>Object.assign({},e,{displayField:n}))),{expanded:_,selection:I,range:E,focusIndex:w}=h,q=_&&-1===w?"":y+"-option-"+w,{toggle:N,select:R,handleKeys:j,handleInput:k,setData:O}=function(e){const t=s((function(){e({type:1})}),[e]),n=s((function(){e({type:0})}),[e]),o=s((function(){e({type:2})}),[e]),a=s((function(t){e({type:6,selection:t})}),[e]),i=s((function(t){switch(t.key){case"ArrowDown":e({type:3});break;case"ArrowUp":e({type:4});break;case"Escape":n();break;case"Enter":e({type:5})}}),[e]),r=s((function(t){const n=t.target;e({type:8,query:n.value})}),[e]),l=s((function(t){e({type:7,data:t})}),[e]);return{expand:t,collapse:n,toggle:o,select:a,handleKeys:i,handleInput:r,setData:l}}(v),D=s((function(){let e=p.current;e&&e.focus(),N()}),[p]);return d((()=>{O(t)}),[t]),d((()=>{const e=p.current;e&&(e.value=I?"function"==typeof r?r(I).toString():I[n].toString():"")}),[I,n,p,r]),d((()=>{"function"==typeof o&&o(I)}),[I,o]),d((()=>{if(""!==q){const e=document.getElementById(q);e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}}),[q]),d((()=>{_&&x(g)}),[g,_]),d((()=>{const e=()=>x(g);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[g]),a.createElement("div",{className:"combobox-module_combobox__2i64f"},a.createElement("div",{className:"combobox-module_input_wrapper__1Zu2R",role:"combobox","aria-expanded":_?"true":"false","aria-owns":y,"aria-haspopup":"listbox"},a.createElement("input",{type:"text","aria-autocomplete":"both","aria-controls":y,"aria-activedescendant":q,onKeyDown:j,onInput:k,className:"combobox-module_input__2AUD3",ref:p}),a.createElement("div",{className:"combobox-module_trigger__29Deo",tabIndex:-1,role:"button","aria-label":"Show options",onClick:D},"â–¼")),a.createElement(m,{id:y,data:E,displayField:n,focusIndex:w,expanded:_,onSelect:R,selected:I,optionRenderer:i,className:"combobox-module_picker__1MrXx",ref:g}))}function y(){const[e,n]=l([]);return d((()=>{fetch("/data/countries.json").then((e=>e.json())).then(n)}),[]),t.createElement("div",null,t.createElement("p",null,"Nullam vel odio magna. Ut lacinia sit amet quam nec imperdiet. Quisque eget lacus non lectus consectetur rhoncus. Proin eget nunc neque. Mauris sed laoreet augue. Nullam a turpis blandit, fringilla enim vel, accumsan enim. Donec pretium elit eget posuere ornare. Etiam laoreet lorem elit, in mattis ipsum pharetra ac. Quisque viverra sem in dolor dignissim fringilla. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae."),t.createElement(g,{data:e,displayField:"name"}),t.createElement("p",null,"Duis vel enim vel mi vulputate egestas vitae nec odio. Donec vel sem dolor. Sed scelerisque tristique velit, vitae ultricies risus tempus quis. Integer dignissim in est et laoreet. Praesent aliquet congue placerat. Nam dolor ante, eleifend eu finibus eget, posuere accumsan est. Integer ut molestie tortor. Proin mattis orci sit amet lectus sollicitudin, non dignissim nisi tincidunt. Nullam vel leo venenatis, molestie lectus convallis, tincidunt eros. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nunc lorem enim, consectetur at mollis rhoncus, hendrerit quis nulla."))}return{render:function(t){e.render(i.default.createElement(y,null),t)},unmount:function(t){e.unmountComponentAtNode(t)}}}));
//# sourceMappingURL=app.umd.js.map
