!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react-dom"),require("react")):"function"==typeof define&&define.amd?define(["react-dom","react"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).app=t(e.ReactDOM,e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=a(t),r=n(t);const l=t.memo,c=t.useCallback,i=t.useState,d=t.useRef,u=t.useReducer,s=t.useEffect;const f=Object,m=f.assign;function p(e,t){return m({},e,t)}var y=l((function(e){const{id:t,className:n="",data:a,displayField:r,selected:l,focusIndex:c,expanded:i,style:d,onSelect:u,optionRenderer:m}=e,p=t+"-option-";return s((()=>{if(c>-1){const e=document.getElementById(p+c);e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}}),[c]),o.createElement("ul",{id:t,role:"listbox",className:"listbox-module_listbox__16qJO "+n,style:d,tabIndex:-1},i?(y=a,null==y?[]:Array.isArray(y)?y:[y]).map(((e,t)=>{return o.createElement("li",{key:p+t,role:"option",id:p+t,className:"listbox-module_option__3a9MH"+(c===t?" listbox-module_focus__m8cIN":"")+(l===e?" listbox-module_selected__2AANR":""),onClick:()=>u(e)},"function"==typeof m?m(e):(n=e,a=r,f.prototype.hasOwnProperty.call(n,a)?String(e[r]):null));var n,a})):null);var y}));const x=window,g=x.addEventListener,b=x.removeEventListener,_={display:"none"};function h(e){if(null==e)return _;const t=x.innerHeight,{top:n,bottom:a,height:o}=e.getBoundingClientRect();if(n<0||n>t)return _;return n<t-a?{top:o,maxHeight:t-a-5}:{bottom:o,maxHeight:n-5}}const E={id:"",displayField:"",expanded:!1,waiting:!1,focusIndex:-1,selection:void 0,data:[],range:[]};function v(e,t){switch(t.type){case 0:return p(e,{expanded:!1,focusIndex:-1});case 1:return p(e,{expanded:!0});case 2:return v(e,{type:e.expanded?0:1});case 3:{let t=e.range.length;return p(e,{expanded:!0,focusIndex:0===t?-1:(e.focusIndex+1)%t})}case 4:{let t=e.range.length,n=-1===e.focusIndex?t:e.focusIndex;return p(e,{expanded:!0,focusIndex:0===t?-1:(t+n-1)%t})}case 5:if(-1!==e.focusIndex)return p(e,{expanded:!1,focusIndex:-1,range:e.data,selection:e.range[e.focusIndex]});break;case 6:return p(e,{expanded:!1,focusIndex:-1,range:e.data,selection:t.selection});case 7:{let n=t.data;return p(e,{data:n,range:n})}case 8:{const n=new RegExp(t.query,"i");return p(e,{expanded:!0,range:e.data.filter((t=>n.test(t[e.displayField].toString())))})}case 9:return p(e,{expanded:!0,focusIndex:-1,waiting:!1,data:t.data,range:t.data});case 10:return p(e,{waiting:t.waiting})}return e}const{round:w,random:I}=Math;function R(e=""){return e+w(I()+1e17*I()).toString(32)}var N=l((function(e){const t=d(null),n=d(null),{queryMode:a="local",displayField:r="text",className:l="",data:f,hideTrigger:m,disabled:w,readOnly:I,onChange:N,onRemoteQuery:O,optionRenderer:S,displayRenderer:k}=e,[F,j]=u(v,E,(e=>p(e,{id:R("combobox-"),displayField:r}))),{toggle:A,select:M,handleKeys:D,handleRemoteSearch:q,handleLocalSearch:T,setData:C,setWaiting:P}=function(e){const t=c((function(){e({type:1})}),[e]),n=c((function(){e({type:0})}),[e]),a=c((function(){e({type:2})}),[e]),o=c((function(t){e({type:6,selection:t})}),[e]),r=c((function(t){switch(t.key){case"ArrowDown":e({type:3});break;case"ArrowUp":e({type:4});break;case"Escape":n();break;case"Enter":e({type:5})}}),[e]),l=c((function(t){e({type:8,query:t})}),[e]),i=c((function(t){e({type:7,data:t})}),[e]),d=c((function(t){e({type:9,data:t})}),[e]),u=c((function(t){e({type:10,waiting:t})}),[e]);return{expand:t,collapse:n,toggle:a,select:o,handleKeys:r,handleLocalSearch:l,setData:i,handleRemoteSearch:d,setWaiting:u}}(j),{id:H,expanded:L,selection:z,range:K,focusIndex:B,waiting:Q}=F,U=function(e,t){const n=e.current,[a,o]=i((()=>h(n)));return s((()=>{let e=!1;function a(){t&&!e&&(e=!0,x.requestAnimationFrame((()=>{o(h(n)),e=!1})))}return g("resize",a),g("scroll",a),t?a():o(_),()=>{b("resize",a),b("scroll",a)}}),[t,n]),a}(t,L),W=H+"-picker",Z=L&&-1===B?"":W+"-option-"+B,G=c((()=>{!function(e){let t=e.current;t&&t.focus()}(n),A()}),[n]),J=c(function(e,t=250,n){let a;return function(){function o(t){clearTimeout(a),e.apply(n,t)}clearTimeout(a),a=setTimeout(o,t,Array.prototype.slice.call(arguments))}}((e=>{const t=e.target.value;"local"===a?T(t):(P(!0),Promise.resolve("function"==typeof O&&O(t)).then((e=>{!1!==e&&q(e)})))})),[a,O,P,T,q]);return s((()=>{void 0!==f&&C(f)}),[f]),s((()=>{const e=n.current;e&&(e.value=z?"function"==typeof k?k(z).toString():z[r].toString():"")}),[z,r,n,k]),s((()=>{"function"==typeof N&&N(z)}),[z,N]),o.createElement("div",{className:"combobox-module_combobox__2i64f "+l+(Q?" wating combobox-module_waiting__12MZG":""),ref:t},o.createElement("div",{className:"combobox-module_input_wrapper__1Zu2R",role:"combobox","aria-expanded":L?"true":"false","aria-owns":W,"aria-haspopup":"listbox"},o.createElement("input",{type:"text","aria-autocomplete":"both","aria-controls":W,"aria-activedescendant":Z,onKeyDown:D,onInput:J,className:"combobox-module_input__2AUD3",ref:n,disabled:w,readOnly:I}),m?null:o.createElement("div",{className:"combobox-module_trigger__29Deo",tabIndex:-1,role:"button","aria-label":"Show options",onClick:w?void 0:G},"â–¼")),o.createElement(y,{id:W,data:K,displayField:r,focusIndex:B,expanded:L,onSelect:M,selected:z,optionRenderer:S,className:"combobox-module_picker__1MrXx",style:U}))}));var O=l((function({country:e}){return r.default.createElement("div",{className:"option-country-module_wrapper__31TMw"},r.default.createElement("img",{src:e.flag,className:"option-country-module_flag__2cNdo"}),r.default.createElement("div",{className:"option-country-module_details__dh_M_"},r.default.createElement("div",null,e.name),r.default.createElement("div",{className:"option-country-module_capital__2axr3"},e.capital)))}));function S(){const[e,n]=i([]),[a,o]=i([]);s((()=>{fetch("/data/countries.json").then((e=>e.json())).then(n)}),[]);const r=c((function(t){return""===(t=t.trim())?[]:new Promise((function(n,a){const o=new RegExp(t,"i");n(e.filter((e=>o.test(e.name)||o.test(e.capital))))}))}),[e]),l=c((function(e){return t.createElement(O,{country:e})}),[]);return t.createElement("div",null,t.createElement("h5",null,"Normal"),t.createElement(N,{data:e,displayField:"name"}),t.createElement("h5",null,"Read Only"),t.createElement(N,{readOnly:!0,data:e,displayField:"name"}),t.createElement("h5",null,"Disabled"),t.createElement(N,{disabled:!0,data:e,displayField:"name"}),t.createElement("h5",null,"Search"),t.createElement(N,{displayField:"name",queryMode:"remote",onRemoteQuery:r,optionRenderer:l,hideTrigger:!0}))}return{render:function(t){e.render(r.default.createElement(S,null),t)},unmount:function(t){e.unmountComponentAtNode(t)}}}));
//# sourceMappingURL=app.umd.js.map
