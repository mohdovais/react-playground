!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react-dom"),require("react")):"function"==typeof define&&define.amd?define(["react-dom","react"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).app=t(e.ReactDOM,e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r=o(t),a=n(t);const c=t.memo,i=t.useCallback,l=t.useState,s=t.useRef,u=t.useReducer,d=t.useEffect;var p=c((function(e){const{id:t,className:n="",data:o,displayField:a,selected:c,focusIndex:i,expanded:l,style:s,onSelect:u,optionRenderer:p}=e,f=t+"-option-";return d((()=>{if(i>-1){const e=document.getElementById(f+i);e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}}),[i]),r.createElement("ul",{id:t,role:"listbox",className:"listbox-module_listbox__16qJO "+n,style:s},l?(m=o,null==m?[]:Array.isArray(m)?m:[m]).map(((e,t)=>{return r.createElement("li",{key:f+t,role:"option",id:f+t,className:"listbox-module_option__3a9MH"+(i===t?" listbox-module_focus__m8cIN":"")+(c===e?" listbox-module_selected__2AANR":""),onClick:()=>u(e)},"function"==typeof p?p(e):(n=e,o=a,Object.prototype.hasOwnProperty.call(n,o)?String(e[a]):null));var n,o})):null);var m}));const f=window,m=f.addEventListener,x=f.removeEventListener,b={display:"none"};function y(e){if(null==e)return b;const t=f.innerHeight,{top:n,bottom:o,height:r}=e.getBoundingClientRect();if(n<0||n>t)return b;return n<t-o?{top:r,maxHeight:t-o-5}:{bottom:r,maxHeight:n-5}}const g=Object.assign,h={displayField:"",expanded:!1,focusIndex:-1,selection:void 0,data:[],range:[]};function _(e,t){switch(t.type){case 0:return g({},e,{expanded:!1,focusIndex:-1});case 1:return g({},e,{expanded:!0});case 2:return g({},e,{expanded:!e.expanded});case 3:{let t=e.range.length;return g({},e,{expanded:!0,focusIndex:0===t?-1:(e.focusIndex+1)%t})}case 4:{let t=e.range.length,n=-1===e.focusIndex?t:e.focusIndex;return g({},e,{expanded:!0,focusIndex:0===t?-1:(t+n-1)%t})}case 5:if(-1!==e.focusIndex)return g({},e,{expanded:!1,focusIndex:-1,selection:e.range[e.focusIndex]});break;case 6:return g({},e,{expanded:!1,focusIndex:-1,selection:t.selection});case 7:{let n=t.data;return g({},e,{data:n,range:n})}case 8:{const n=new RegExp(t.query,"i");return g({},e,{expanded:!0,range:e.data.filter((t=>n.test(t[e.displayField].toString())))})}}return e}function I(e){const{data:t,displayField:n="text",onChange:o,optionRenderer:a,displayRenderer:c}=e,g=s(null),I=s(null),v=function(e=""){return l((()=>e+Math.round(Math.random()+1e17*Math.random()).toString(32)))[0]}("combobox-"),[E,w]=u(_,h,(e=>Object.assign({},e,{displayField:n}))),{toggle:k,select:j,handleKeys:O,handleInput:R,setData:N}=function(e){const t=i((function(){e({type:1})}),[e]),n=i((function(){e({type:0})}),[e]),o=i((function(){e({type:2})}),[e]),r=i((function(t){e({type:6,selection:t})}),[e]),a=i((function(t){switch(t.key){case"ArrowDown":e({type:3});break;case"ArrowUp":e({type:4});break;case"Escape":n();break;case"Enter":e({type:5})}}),[e]),c=i((function(t){const n=t.target;e({type:8,query:n.value})}),[e]),l=i((function(t){e({type:7,data:t})}),[e]);return{expand:t,collapse:n,toggle:o,select:r,handleKeys:a,handleInput:c,setData:l}}(w),{expanded:A,selection:S,range:D,focusIndex:F}=E,M=function(e,t){const n=e.current,[o,r]=l((()=>y(n)));return d((()=>{let e=!1;function o(){t&&!e&&(e=!0,f.requestAnimationFrame((()=>{r(y(n)),e=!1})))}return m("resize",o),m("scroll",o),t?o():r(b),()=>{x("resize",o),x("scroll",o)}}),[t,n]),o}(g,A),q=v+"-picker",C=A&&-1===F?"":q+"-option-"+F,H=i((function(){let e=I.current;e&&e.focus(),k()}),[I]);return d((()=>{N(t)}),[t]),d((()=>{const e=I.current;e&&(e.value=S?"function"==typeof c?c(S).toString():S[n].toString():"")}),[S,n,I,c]),d((()=>{"function"==typeof o&&o(S)}),[S,o]),r.createElement("div",{className:"combobox-module_combobox__2i64f",ref:g},r.createElement("div",{className:"combobox-module_input_wrapper__1Zu2R",role:"combobox","aria-expanded":A?"true":"false","aria-owns":q,"aria-haspopup":"listbox"},r.createElement("input",{type:"text","aria-autocomplete":"both","aria-controls":q,"aria-activedescendant":C,onKeyDown:O,onInput:R,className:"combobox-module_input__2AUD3",ref:I}),r.createElement("div",{className:"combobox-module_trigger__29Deo",tabIndex:-1,role:"button","aria-label":"Show options",onClick:H},"â–¼")),r.createElement(p,{id:q,data:D,displayField:n,focusIndex:F,expanded:A,onSelect:j,selected:S,optionRenderer:a,className:"combobox-module_picker__1MrXx",style:M}))}function v(){const[e,n]=l([]);return d((()=>{fetch("/data/countries.json").then((e=>e.json())).then(n)}),[]),t.createElement(I,{data:e,displayField:"name"})}return{render:function(t){e.render(a.default.createElement(v,null),t)},unmount:function(t){e.unmountComponentAtNode(t)}}}));
//# sourceMappingURL=app.umd.js.map
