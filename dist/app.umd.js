!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react-dom"),require("react")):"function"==typeof define&&define.amd?define(["react-dom","react"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).app=t(e.ReactDOM,e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r=o(t),a=n(t);const c=t.memo,i=t.useCallback,l=t.useState,s=t.useRef,u=t.useReducer,d=t.useEffect;const f=Object,p=f.assign;function m(e,t){return p({},e,t)}var x=c((function(e){const{id:t,className:n="",data:o,displayField:a,selected:c,focusIndex:i,expanded:l,style:s,onSelect:u,optionRenderer:p}=e,m=t+"-option-";return d((()=>{if(i>-1){const e=document.getElementById(m+i);e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}}),[i]),r.createElement("ul",{id:t,role:"listbox",className:"listbox-module_listbox__16qJO "+n,style:s},l?(x=o,null==x?[]:Array.isArray(x)?x:[x]).map(((e,t)=>{return r.createElement("li",{key:m+t,role:"option",id:m+t,className:"listbox-module_option__3a9MH"+(i===t?" listbox-module_focus__m8cIN":"")+(c===e?" listbox-module_selected__2AANR":""),onClick:()=>u(e)},"function"==typeof p?p(e):(n=e,o=a,f.prototype.hasOwnProperty.call(n,o)?String(e[a]):null));var n,o})):null);var x}));const b=window,y=b.addEventListener,g=b.removeEventListener,_={display:"none"};function h(e){if(null==e)return _;const t=b.innerHeight,{top:n,bottom:o,height:r}=e.getBoundingClientRect();if(n<0||n>t)return _;return n<t-o?{top:r,maxHeight:t-o-5}:{bottom:r,maxHeight:n-5}}const I={displayField:"",expanded:!1,focusIndex:-1,selection:void 0,data:[],range:[]};function v(e,t){switch(t.type){case 0:return m(e,{expanded:!1,focusIndex:-1});case 1:return m(e,{expanded:!0});case 2:return m(e,{expanded:!e.expanded});case 3:{let t=e.range.length;return m(e,{expanded:!0,focusIndex:0===t?-1:(e.focusIndex+1)%t})}case 4:{let t=e.range.length,n=-1===e.focusIndex?t:e.focusIndex;return m(e,{expanded:!0,focusIndex:0===t?-1:(t+n-1)%t})}case 5:if(-1!==e.focusIndex)return m(e,{expanded:!1,focusIndex:-1,range:e.data,selection:e.range[e.focusIndex]});break;case 6:return m(e,{expanded:!1,focusIndex:-1,range:e.data,selection:t.selection});case 7:{let n=t.data;return m(e,{data:n,range:n})}case 8:{const n=new RegExp(t.query,"i");return m(e,{expanded:!0,range:e.data.filter((t=>n.test(t[e.displayField].toString())))})}}return e}const{round:E,random:w}=Math;function k(e=""){return e+E(w()+1e17*w()).toString(32)}function R(e){const{data:t,displayField:n="text",onChange:o,optionRenderer:a,displayRenderer:c}=e,f=s(null),p=s(null),[E,w]=u(v,I,(e=>m(e,{id:k("combobox"),displayField:n}))),{toggle:R,select:N,handleKeys:j,handleInput:O,setData:A}=function(e){const t=i((function(){e({type:1})}),[e]),n=i((function(){e({type:0})}),[e]),o=i((function(){e({type:2})}),[e]),r=i((function(t){e({type:6,selection:t})}),[e]),a=i((function(t){switch(t.key){case"ArrowDown":e({type:3});break;case"ArrowUp":e({type:4});break;case"Escape":n();break;case"Enter":e({type:5})}}),[e]),c=i((function(t){const n=t.target;e({type:8,query:n.value})}),[e]),l=i((function(t){e({type:7,data:t})}),[e]);return{expand:t,collapse:n,toggle:o,select:r,handleKeys:a,handleInput:c,setData:l}}(w),{id:S,expanded:D,selection:F,range:q,focusIndex:C}=E,M=function(e,t){const n=e.current,[o,r]=l((()=>h(n)));return d((()=>{let e=!1;function o(){t&&!e&&(e=!0,b.requestAnimationFrame((()=>{r(h(n)),e=!1})))}return y("resize",o),y("scroll",o),t?o():r(_),()=>{g("resize",o),g("scroll",o)}}),[t,n]),o}(f,D),H=S+"-picker",z=D&&-1===C?"":H+"-option-"+C,K=i((function(){let e=p.current;e&&e.focus(),R()}),[p]);return d((()=>{A(t)}),[t]),d((()=>{const e=p.current;e&&(e.value=F?"function"==typeof c?c(F).toString():F[n].toString():"")}),[F,n,p,c]),d((()=>{"function"==typeof o&&o(F)}),[F,o]),r.createElement("div",{className:"combobox-module_combobox__2i64f",ref:f},r.createElement("div",{className:"combobox-module_input_wrapper__1Zu2R",role:"combobox","aria-expanded":D?"true":"false","aria-owns":H,"aria-haspopup":"listbox"},r.createElement("input",{type:"text","aria-autocomplete":"both","aria-controls":H,"aria-activedescendant":z,onKeyDown:j,onInput:O,className:"combobox-module_input__2AUD3",ref:p}),r.createElement("div",{className:"combobox-module_trigger__29Deo",tabIndex:-1,role:"button","aria-label":"Show options",onClick:K},"â–¼")),r.createElement(x,{id:H,data:q,displayField:n,focusIndex:C,expanded:D,onSelect:N,selected:F,optionRenderer:a,className:"combobox-module_picker__1MrXx",style:M}))}function N(){const[e,n]=l([]);return d((()=>{fetch("/data/countries.json").then((e=>e.json())).then(n)}),[]),t.createElement(R,{data:e,displayField:"name"})}return{render:function(t){e.render(a.default.createElement(N,null),t)},unmount:function(t){e.unmountComponentAtNode(t)}}}));
//# sourceMappingURL=app.umd.js.map
