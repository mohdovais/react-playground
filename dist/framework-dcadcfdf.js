import{R as e,r as t}from"./vendor-627d465c.js";const n=t.memo,r=t.useCallback,l=t.useState,a=t.useRef,o=t.useReducer,c=t.useEffect,i=t.useMemo,s=t.useContext,d=t.Children,u=t.isValidElement,p=t.createContext,m=window,f=m.addEventListener,v=m.removeEventListener,h={display:"none"};function x(e,t=h){if(null==e)return t;const n=m.innerHeight,r=m.innerWidth,{top:l,left:a,bottom:o,height:c,width:i}=e.getBoundingClientRect();if(l<0||l>n||a<0||a>r)return t;const s=r-a;let d={position:"absolute",width:"max-content",minWidth:i};return l<n-o?(d.top=c,d.maxHeight=Math.floor(n-o-5)):(d.bottom=c,d.maxHeight=l-5),a<s?(d.left=0,d.maxWidth=Math.floor(r-a-5)):(d.right=0,d.maxWidth=a-5),d}const{round:y,random:b}=Math;function E(e){return l((()=>function(e=""){return e+y(b()+1e17*b()).toString(32)}(e)))[0]}var w=p({keyDown:null,onChange:e=>{}});const g=Object.assign;function k(e,t){return g({},e,t)}const C=["ArrowDown","ArrowUp","ArrowRight","ArrowLeft"," ","Enter","Escape"];function D(e,t){switch(t.type){case 0:return k(e,{value:t.value,expanded:!t.collapse&&e.expanded});case 1:return k(e,{expanded:t.expand});case 2:return k(e,{keyDown:t.key,expanded:t.expand||e.expanded})}return e}const N=n((function(){return e.createElement("svg",{viewBox:"0 0 16 16"},e.createElement("path",{fill:"none",stroke:"#343a40",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2 5l6 6 6-6"}))}));var O=n((function(t){const{autocomplete:n="both",autofocus:s,children:d,className:u="",disabled:p,id:y,multiple:b,name:g,onInput:k,placeholder:O,readOnly:j,required:A,role:K="combobox",style:L,triggerIcon:M=e.createElement(N,null),hideTrigger:P}=t,R=a(null),W=a(null),{expanded:I,value:S,activeDescendant:q,context:H,expand:z,handleKeyDown:B}=function({multiple:e}){const[t,n]=o(D,{expanded:!1,keyDown:null,value:"",activeDescendant:""}),{expanded:l,value:a,keyDown:c,activeDescendant:s}=t,d=r(((e=!0)=>{n({type:1,expand:e})}),[n]),u=r((t=>{n({type:0,value:t,collapse:!e})}),[n]);return{expanded:l,value:a,activeDescendant:s,context:i((()=>({onChange:u,keyDown:c})),[c]),expand:d,handleKeyDown:r((function(e){const{key:t,ctrlKey:r,metaKey:l,shiftKey:a}=e;return"Escape"===t?n({type:1,expand:!1}):C.indexOf(t)>-1?n({type:2,key:{key:t,shiftKey:a,ctrlKey:r||l},expand:"ArrowDown"===t||"ArrowUp"===t}):void 0}),[])}}({multiple:b}),U=E("picker-"),F=void 0===y?U:y,T=F+"-picker",V=function(e,t=!0){const n=e.current,[r,a]=l((()=>x(n)));return c((()=>{let e=!1;function r(){t&&!e&&(e=!0,m.requestAnimationFrame((()=>{a(x(n)),e=!1})))}return f("resize",r),f("scroll",r),t?r():a(h),()=>{v("resize",r),v("scroll",r)}}),[t,n]),r}(R,I),G=p||P?void 0:()=>{var e;z(!I),null==(e=null==W?void 0:W.current)||e.focus()};return c((()=>{var e;s&&(null==(e=null==W?void 0:W.current)||e.focus())}),[]),e.createElement("div",{id:F,className:"x-cc-gg "+u,style:L,role:K,"aria-expanded":I?"true":"false","aria-owns":T,"aria-haspopup":"listbox",ref:R},e.createElement("div",{className:"x-cc-ii"},e.createElement("div",null,e.createElement("input",{type:"text",name:g,"aria-autocomplete":n,"aria-controls":T,"aria-activedescendant":q,onKeyDown:B,onChange:k,ref:W,disabled:p,readOnly:j,placeholder:O,className:"x-cc-hh",required:A,value:S}),P?null:e.createElement("div",{tabIndex:-1,role:"button","aria-label":"Show picker",className:"x-cc-kk",onClick:G},M)),e.createElement("div",{id:T,className:"x-cc-jj",style:V},I?e.createElement(w.Provider,{value:H},d):null)))}));const j=w,A=e.createContext({onClick:e=>{}}),K=e.createContext({disabled:!1});var L=n((function(t){const{value:n,children:r,disabled:l=!1,selected:o=!1,className:c="",style:i}=t,d=a(null),{onClick:u}=s(A),p=s(K).disabled||l;return e.createElement("li",{className:"x-bb-cc "+c+(p?" disabled":"")+(o?" selected":""),style:i,ref:d,onClick:p?void 0:()=>u(n)},r)}));var M=n((function(t){const{className:n="",style:r,label:l,disabled:a=!1}=t,o=i((()=>d.toArray(t.children).filter((e=>u(e)&&e.type===L))),[t.children]);return e.createElement("li",{className:"x-bb-ee "+n,style:r},e.createElement("label",{className:"x-bb-ff"+(a?" disabled":"")},l),o.length>0?e.createElement(K.Provider,{value:{disabled:a}},e.createElement("ul",null,o)):null)}));function P(e,t){for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r.type===L){const e=r.props;e.selected&&t.push(e.value)}else r.type===M&&P(r.props.children,t)}return t}function R(e){return P(e,[])}var W=Object.prototype.hasOwnProperty,I=Object.getOwnPropertySymbols,S=Object.prototype.propertyIsEnumerable,q=Object.assign;const H=n((function(t){const{keyDown:n,onChange:r}=s(j),{children:l,multiple:a=!1}=t,o=i((()=>({onClick:r})),[r]);return e.createElement("ul",{className:"x-bb-dd"},e.createElement(A.Provider,{value:o},l))}));var z=n((function(n){const{className:r="",children:a}=n,o=((e,t)=>{var n={};for(var r in e)W.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&I)for(var r of I(e))t.indexOf(r)<0&&S.call(e,r)&&(n[r]=e[r]);return n})(n,["className","children"]),c=!n.multiple,s=i((()=>function(e){return d.toArray(e).filter((e=>u(e)&&(e.type===L||e.type===M)))}(a)),[a]),p=i((()=>R(s)),[s]),[m,f]=l(n.value);return t.useEffect((()=>{c&&f(p[0])}),[c,p]),console.log(m),e.createElement(O,q(q({},o),{className:"combobox "+r}),e.createElement(H,{multiple:n.multiple},s))}));const B=M,U=L;export{z as C,B as O,c as a,r as b,U as c,l as u};
//# sourceMappingURL=framework-dcadcfdf.js.map
